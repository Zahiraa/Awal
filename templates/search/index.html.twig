{% extends 'public.html.twig' %}
{% block title %}  {{ 'Navbar.accueil'|trans }}
{% endblock %}

{% set termePath = path('app_proposition_new') %}
{% if is_granted('ROLE_MANAGER') or is_granted('ROLE_ADMIN') %}
	{% set termePath = path('app_admin_terme_new') %}
{% endif %}

{% block content %}

	{% include 'home/hero-section.html.twig' %}
	{# Search Results Gallery #}
	<section class="py-12 ">
		<div class="max-w-7xl mx-auto px-4 sm:px-6">
			{% if results|length > 0  %}
				<h2 class="text-4xl font-semibold text-gray-900 mb-4 capitalize" id="resultsHeader">
					{{terme}}</h2>
			{% endif %}
			<div id="galleryLoading" class="hidden text-center py-12">
				<div class="inline-flex items-center space-x-2">
					<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"></div>
					<span class="text-lg text-gray-600">    {{ 'common.load'|trans }}</span>
				</div>
			</div>


			{% if results|length > 0  %}
				<div class="flex flex-row flex-wrap gap-10 justify-center md:justify-start">
					{% for result in results %}
						<a href="{{ result.url }}" class="bg-white py-5 px-4 rounded-lg card-box-shadow border border-light-gray-200 overflow-hidden hover:shadow-md transition-shadow cursor-pointer relative w-[230px] md:w-[calc(33.333%-2.5rem)] lg:w-[230px]">

							<svg class="absolute top-1 right-1 mr-1 cursor-pointer" width="15" height="14" viewbox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M7.5 17L17.5 7M17.5 7H7.5M17.5 7V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
							</svg>
							{%  set src= asset('build/images/default/placeholder.jpg') %}
							{%if result.image and "." in result.image %}
								{% set src = asset(result.image) %}
							{% endif %}
							<img src="{{ src }}" alt="{{result.french}}" class="w-full rounded-lg aspect-square max-w-[160px] max-h-[160px] mx-auto object-cover object-center mt-2">
							<div class="">
								<h3 class="text-lg font-semibold text-gray-900 mb-3 text-center break-all">
									{{ result.french|length > 15 ? result.french|slice(0, 15) ~ '...' : result.french }}</h3>
								<div class="space-y-1 text-sm">
									<div>
										<span class="text-gray-600 text-sm font-semibold">Arabe:
										</span>
										<span class="text-primary-600 text-sm font-semibold break-all" dir="rtl">
											{{ result.arabic|length > 15 ? result.arabic|slice(0, 15) ~ '...' : result.arabic }}
										</span>
									</div>

									<div>
										<span class="text-gray-600 text-sm font-semibold">Darija:
										</span>
										<span class="text-primary-600 text-sm font-semibold break-all" dir="rtl">
											{{ result.darija|length > 15 ? result.darija|slice(0, 15) ~ '...' : result.darija }}</span>
									</div>

								</div>
							</div>
						</a>
					{% endfor %}
				</div>

			{% else %}
				<!-- No Results State -->
				<div id="noResults" class="text-center py-12">

					<div class="flex justify-center mb-8">
						<img src="{{ asset('build/images/icons/empty-state.svg') }}" width="425" height="310" alt="No Results" class="w-full h-[140px] md:w-[425px] md:min-w-[425px] md:h-[310px] md:min-h-[310px]">
					</div>
					<h3 class="text-3xl font-semibold text-gray-900 mb-2">
						{{ 'Glossaire.noResults.autocomplete.placeholder'|trans }}</h3>
					<p class="text-gray-600 mb-6">
						{{ 'Glossaire.noResults.autocomplete.search'|trans }}
						«
						{{terme}}
						»
						{{ 'Glossaire.noResults.autocomplete.texte'|trans }}
					</p>

					<a href="{{ termePath }}" class="bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition duration-200">
						{{ 'Glossaire.noResults.button'|trans }}
					</a>
				</div>
			{% endif %}


		</div>
	</section>


{% endblock %}


{% block head_scripts %}
	{% include 'home/_search_script.html.twig' %}
{% endblock %}
